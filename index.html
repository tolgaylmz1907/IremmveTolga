<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fotoğraf Yükleme & Galeri</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  .gallery {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 20px;
  }
  .gallery-item {
    position: relative;
  }
  .gallery-item img {
    width: 120px;
    height: 90px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  .gallery-item button {
    position: absolute;
    top: 3px;
    right: 3px;
    background: rgba(255, 0, 0, 0.7);
    border: none;
    color: white;
    border-radius: 50%;
    width: 22px;
    height: 22px;
    cursor: pointer;
    font-weight: bold;
  }
  #modal {
    display: none;
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  #modal img {
    max-width: 90vw;
    max-height: 90vh;
    border-radius: 10px;
  }
  #closeModal {
    position: absolute;
    top: 15px;
    right: 25px;
    font-size: 30px;
    color: white;
    cursor: pointer;
    user-select: none;
  }
</style>
</head>
<body>

<h1>Fotoğraf Yükle ve Galeride Görüntüle</h1>

<input type="file" id="photoInput" accept="image/*" multiple />

<div class="gallery" id="gallery"></div>

<div id="modal">
  <span id="closeModal">&times;</span>
  <img id="modalImg" src="" alt="Büyük Fotoğraf" />
</div>

<script>
  const photoInput = document.getElementById('photoInput');
  const gallery = document.getElementById('gallery');
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modalImg');
  const closeModalBtn = document.getElementById('closeModal');

  // LocalStorage'dan fotoğrafları yükle ve göster
  function loadPhotos() {
    const photos = JSON.parse(localStorage.getItem('photos')) || [];
    gallery.innerHTML = '';

    photos.forEach((photo, index) => {
      const div = document.createElement('div');
      div.className = 'gallery-item';

      const img = document.createElement('img');
      img.src = photo;
      img.alt = `Fotoğraf ${index + 1}`;
      img.title = "Büyütmek için tıkla";
      img.onclick = () => openModal(photo);

      const delBtn = document.createElement('button');
      delBtn.textContent = '×';
      delBtn.title = "Fotoğrafı sil";
      delBtn.onclick = (e) => {
        e.stopPropagation(); // Tıklama modal açmayı engelle
        if(confirm('Bu fotoğrafı silmek istediğine emin misin?')) {
          deletePhoto(index);
        }
      };

      div.appendChild(img);
      div.appendChild(delBtn);
      gallery.appendChild(div);
    });
  }

  function savePhotos(photos) {
    localStorage.setItem('photos', JSON.stringify(photos));
  }

  function deletePhoto(index) {
    const photos = JSON.parse(localStorage.getItem('photos')) || [];
    photos.splice(index, 1);
    savePhotos(photos);
    loadPhotos();
  }

  photoInput.addEventListener('change', e => {
    const files = Array.from(e.target.files).filter(f => f.type.startsWith('image/'));
    if(files.length === 0) return;

    const photos = JSON.parse(localStorage.getItem('photos')) || [];
    let loadedCount = 0;

    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = (event) => {
        photos.push(event.target.result);
        loadedCount++;
        if(loadedCount === files.length) {
          savePhotos(photos);
          loadPhotos();
        }
      };
      reader.readAsDataURL(file);
    });

    photoInput.value = '';
  });

  function openModal(src) {
    modal.style.display = 'flex';
    modalImg.src = src;
  }
  closeModalBtn.onclick = () => {
    modal.style.display = 'none';
    modalImg.src = '';
  };
  modal.onclick = (e) => {
    if(e.target === modal) {
      modal.style.display = 'none';
      modalImg.src = '';
    }
  };

  loadPhotos();
</script>

</body>
</html>
